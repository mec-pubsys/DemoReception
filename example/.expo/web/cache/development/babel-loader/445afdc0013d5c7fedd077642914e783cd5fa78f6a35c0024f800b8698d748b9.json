{"ast":null,"code":"'use strict';\n\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport \"../layoutReanimation/animationsManager.js\";\nimport invariant from 'invariant';\nimport React from 'react';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { getReduceMotionFromConfig } from \"../animation/util.js\";\nimport { maybeBuild } from \"../animationBuilder.js\";\nimport { LayoutAnimationType } from \"../commonTypes.js\";\nimport { SkipEnteringContext } from \"../component/LayoutAnimationConfig.js\";\nimport { adaptViewConfig } from \"../ConfigHelper.js\";\nimport { enableLayoutAnimations, markNodeAsRemovable, unmarkNodeAsRemovable } from \"../core.js\";\nimport { ReanimatedError } from \"../errors.js\";\nimport { getShadowNodeWrapperFromRef } from \"../fabricUtils\";\nimport { SharedTransition } from \"../layoutReanimation/index.js\";\nimport { configureWebLayoutAnimations, getReducedMotionFromConfig, saveSnapshot, startWebLayoutAnimation, tryActivateLayoutTransition } from \"../layoutReanimation/web/index.js\";\nimport { addHTMLMutationObserver } from \"../layoutReanimation/web/domUtils.js\";\nimport { findHostInstance } from \"../platform-specific/findHostInstance\";\nimport { isFabric, isJest, isReact19, isWeb, shouldBeUseWeb } from \"../PlatformChecker.js\";\nimport { componentWithRef } from \"../reactUtils.js\";\nimport { updateLayoutAnimations } from \"../UpdateLayoutAnimations.js\";\nimport { getViewInfo } from \"./getViewInfo.js\";\nimport { InlinePropManager } from \"./InlinePropManager.js\";\nimport JSPropsUpdater from \"./JSPropsUpdater\";\nimport { NativeEventsManager } from \"./NativeEventsManager.js\";\nimport { PropsFilter } from \"./PropsFilter.js\";\nimport setAndForwardRef from \"./setAndForwardRef.js\";\nimport { flattenArray } from \"./utils.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar IS_WEB = isWeb();\nvar IS_JEST = isJest();\nvar IS_REACT_19 = isReact19();\nvar SHOULD_BE_USE_WEB = shouldBeUseWeb();\nif (IS_WEB) {\n  configureWebLayoutAnimations();\n}\nfunction onlyAnimatedStyles(styles) {\n  return styles.filter(function (style) {\n    return style == null ? void 0 : style.viewDescriptors;\n  });\n}\nvar id = 0;\nexport function createAnimatedComponent(Component, options) {\n  if (!IS_REACT_19) {\n    invariant(typeof Component !== 'function' || Component.prototype && Component.prototype.isReactComponent, `Looks like you're passing a function component \\`${Component.name}\\` to \\`createAnimatedComponent\\` function which supports only class components. Please wrap your function component with \\`React.forwardRef()\\` or use a class component instead.`);\n  }\n  var AnimatedComponent = function (_React$Component) {\n    _inherits(AnimatedComponent, _React$Component);\n    var _super = _createSuper(AnimatedComponent);\n    function AnimatedComponent(props) {\n      var _this$context2;\n      var _this;\n      _classCallCheck(this, AnimatedComponent);\n      _this = _super.call(this, props);\n      _this._styles = null;\n      _this._isFirstRender = true;\n      _this.jestAnimatedStyle = {\n        value: {}\n      };\n      _this.jestAnimatedProps = {\n        value: {}\n      };\n      _this._componentRef = null;\n      _this._hasAnimatedRef = false;\n      _this._componentDOMRef = null;\n      _this._sharedElementTransition = null;\n      _this._jsPropsUpdater = new JSPropsUpdater();\n      _this._InlinePropManager = new InlinePropManager();\n      _this._PropsFilter = new PropsFilter();\n      _this.reanimatedID = id++;\n      _this._willUnmount = false;\n      _this._resolveComponentRef = function (ref) {\n        var componentRef = ref;\n        if (componentRef && componentRef.getAnimatableRef) {\n          _this._hasAnimatedRef = true;\n          return componentRef.getAnimatableRef();\n        }\n        if (SHOULD_BE_USE_WEB) {\n          if (componentRef && componentRef.elementRef) {\n            _this._componentDOMRef = componentRef.elementRef.current;\n          } else {\n            _this._componentDOMRef = ref;\n          }\n        }\n        return componentRef;\n      };\n      _this._setComponentRef = setAndForwardRef({\n        getForwardedRef: function getForwardedRef() {\n          return _this.props.forwardedRef;\n        },\n        setLocalRef: function setLocalRef(ref) {\n          if (!ref) {\n            return;\n          }\n          if (ref !== _this._componentRef) {\n            _this._componentRef = _this._resolveComponentRef(ref);\n            _this._viewInfo = undefined;\n          }\n          var _this$props = _this.props,\n            layout = _this$props.layout,\n            entering = _this$props.entering,\n            exiting = _this$props.exiting,\n            sharedTransitionTag = _this$props.sharedTransitionTag;\n          if (layout || entering || exiting || sharedTransitionTag) {\n            var _this$context;\n            if (!SHOULD_BE_USE_WEB) {\n              enableLayoutAnimations(true, false);\n            }\n            if (sharedTransitionTag) {\n              _this._configureSharedTransition();\n            }\n            var skipEntering = (_this$context = _this.context) == null ? void 0 : _this$context.current;\n            if (entering && !isFabric() && !skipEntering && !IS_WEB) {\n              _this._configureLayoutAnimation(LayoutAnimationType.ENTERING, _this.props.entering);\n            }\n          }\n        }\n      });\n      if (IS_JEST) {\n        _this.jestAnimatedStyle = {\n          value: {}\n        };\n        _this.jestAnimatedProps = {\n          value: {}\n        };\n      }\n      var _skipEntering = (_this$context2 = _this.context) == null ? void 0 : _this$context2.current;\n      if (isFabric() && !_skipEntering) {\n        _this._configureLayoutAnimation(LayoutAnimationType.ENTERING, _this.props.entering);\n      }\n      return _this;\n    }\n    _createClass(AnimatedComponent, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this$_NativeEventsMa, _this$_viewInfo;\n        if (!IS_WEB) {\n          this._NativeEventsManager = new NativeEventsManager(this, options);\n        }\n        (_this$_NativeEventsMa = this._NativeEventsManager) == null ? void 0 : _this$_NativeEventsMa.attachEvents();\n        this._jsPropsUpdater.addOnJSPropsChangeListener(this);\n        this._attachAnimatedStyles();\n        this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n        this._configureLayoutAnimation(LayoutAnimationType.LAYOUT, this.props.layout);\n        this._configureLayoutAnimation(LayoutAnimationType.EXITING, this.props.exiting);\n        if (IS_WEB) {\n          var _this$context3;\n          if (this.props.exiting && this._componentDOMRef) {\n            saveSnapshot(this._componentDOMRef);\n          }\n          if (!this.props.entering || getReducedMotionFromConfig(this.props.entering)) {\n            this._isFirstRender = false;\n            return;\n          }\n          var skipEntering = (_this$context3 = this.context) == null ? void 0 : _this$context3.current;\n          if (!skipEntering) {\n            startWebLayoutAnimation(this.props, this._componentDOMRef, LayoutAnimationType.ENTERING);\n          } else if (this._componentDOMRef) {\n            this._componentDOMRef.style.visibility = 'initial';\n          }\n        }\n        var viewTag = (_this$_viewInfo = this._viewInfo) == null ? void 0 : _this$_viewInfo.viewTag;\n        if (!SHOULD_BE_USE_WEB && isFabric() && this._willUnmount && typeof viewTag === 'number') {\n          unmarkNodeAsRemovable(viewTag);\n        }\n        this._isFirstRender = false;\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        var _this$_NativeEventsMa2, _this$_sharedElementT, _this$_viewInfo2;\n        (_this$_NativeEventsMa2 = this._NativeEventsManager) == null ? void 0 : _this$_NativeEventsMa2.detachEvents();\n        this._jsPropsUpdater.removeOnJSPropsChangeListener(this);\n        this._detachStyles();\n        this._InlinePropManager.detachInlineProps();\n        if (this.props.sharedTransitionTag) {\n          this._configureSharedTransition(true);\n        }\n        (_this$_sharedElementT = this._sharedElementTransition) == null ? void 0 : _this$_sharedElementT.unregisterTransition(this.getComponentViewTag(), true);\n        var exiting = this.props.exiting;\n        if (IS_WEB && this._componentDOMRef && exiting && !getReducedMotionFromConfig(exiting)) {\n          addHTMLMutationObserver();\n          startWebLayoutAnimation(this.props, this._componentDOMRef, LayoutAnimationType.EXITING);\n        } else if (exiting && !IS_WEB && !isFabric()) {\n          var reduceMotionInExiting = 'getReduceMotion' in exiting && typeof exiting.getReduceMotion === 'function' ? getReduceMotionFromConfig(exiting.getReduceMotion()) : getReduceMotionFromConfig();\n          if (!reduceMotionInExiting) {\n            this._configureLayoutAnimation(LayoutAnimationType.EXITING, exiting);\n          }\n        }\n        var wrapper = (_this$_viewInfo2 = this._viewInfo) == null ? void 0 : _this$_viewInfo2.shadowNodeWrapper;\n        if (!SHOULD_BE_USE_WEB && isFabric() && wrapper) {\n          markNodeAsRemovable(wrapper);\n        }\n        this._willUnmount = true;\n      }\n    }, {\n      key: \"getComponentViewTag\",\n      value: function getComponentViewTag() {\n        return this._getViewInfo().viewTag;\n      }\n    }, {\n      key: \"_detachStyles\",\n      value: function _detachStyles() {\n        var viewTag = this.getComponentViewTag();\n        if (viewTag !== -1 && this._styles !== null) {\n          var _this$props$animatedP;\n          for (var style of this._styles) {\n            style.viewDescriptors.remove(viewTag);\n          }\n          if ((_this$props$animatedP = this.props.animatedProps) != null && _this$props$animatedP.viewDescriptors) {\n            this.props.animatedProps.viewDescriptors.remove(viewTag);\n          }\n        }\n      }\n    }, {\n      key: \"_updateFromNative\",\n      value: function _updateFromNative(props) {\n        if (options != null && options.setNativeProps) {\n          options.setNativeProps(this._componentRef, props);\n        } else {\n          var _this$_componentRef;\n          (_this$_componentRef = this._componentRef) == null ? void 0 : _this$_componentRef.setNativeProps == null ? void 0 : _this$_componentRef.setNativeProps(props);\n        }\n      }\n    }, {\n      key: \"_getViewInfo\",\n      value: function _getViewInfo() {\n        if (this._viewInfo !== undefined) {\n          return this._viewInfo;\n        }\n        var viewTag;\n        var viewName;\n        var shadowNodeWrapper = null;\n        var viewConfig;\n        var DOMElement = null;\n        if (SHOULD_BE_USE_WEB) {\n          viewTag = this._componentRef;\n          DOMElement = this._componentDOMRef;\n          viewName = null;\n          shadowNodeWrapper = null;\n          viewConfig = null;\n        } else {\n          var hostInstance = findHostInstance(this);\n          if (!hostInstance) {\n            throw new ReanimatedError('Cannot find host instance for this component. Maybe it renders nothing?');\n          }\n          var viewInfo = getViewInfo(hostInstance);\n          viewTag = viewInfo.viewTag;\n          viewName = viewInfo.viewName;\n          viewConfig = viewInfo.viewConfig;\n          shadowNodeWrapper = isFabric() ? getShadowNodeWrapperFromRef(this, hostInstance) : null;\n        }\n        this._viewInfo = {\n          viewTag: viewTag,\n          viewName: viewName,\n          shadowNodeWrapper: shadowNodeWrapper,\n          viewConfig: viewConfig\n        };\n        if (DOMElement) {\n          this._viewInfo.DOMElement = DOMElement;\n        }\n        return this._viewInfo;\n      }\n    }, {\n      key: \"_attachAnimatedStyles\",\n      value: function _attachAnimatedStyles() {\n        var _this$props$animatedP2,\n          _this2 = this,\n          _this$props$animatedP3;\n        var styles = this.props.style ? onlyAnimatedStyles(flattenArray(this.props.style)) : [];\n        var animatedProps = this.props.animatedProps;\n        var prevStyles = this._styles;\n        this._styles = styles;\n        var prevAnimatedProps = this._animatedProps;\n        this._animatedProps = animatedProps;\n        var _this$_getViewInfo = this._getViewInfo(),\n          viewTag = _this$_getViewInfo.viewTag,\n          viewName = _this$_getViewInfo.viewName,\n          shadowNodeWrapper = _this$_getViewInfo.shadowNodeWrapper,\n          viewConfig = _this$_getViewInfo.viewConfig;\n        var hasReanimated2Props = ((_this$props$animatedP2 = this.props.animatedProps) == null ? void 0 : _this$props$animatedP2.viewDescriptors) || styles.length;\n        if (hasReanimated2Props && viewConfig) {\n          adaptViewConfig(viewConfig);\n        }\n        if (prevStyles) {\n          var hasOneSameStyle = styles.length === 1 && prevStyles.length === 1 && styles[0] === prevStyles[0];\n          if (!hasOneSameStyle) {\n            var _loop = function _loop(prevStyle) {\n              var isPresent = styles.some(function (style) {\n                return style === prevStyle;\n              });\n              if (!isPresent) {\n                prevStyle.viewDescriptors.remove(viewTag);\n              }\n            };\n            for (var prevStyle of prevStyles) {\n              _loop(prevStyle);\n            }\n          }\n        }\n        if (animatedProps && IS_JEST) {\n          var _animatedProps$initia;\n          this.jestAnimatedProps.value = _objectSpread(_objectSpread({}, this.jestAnimatedProps.value), animatedProps == null ? void 0 : (_animatedProps$initia = animatedProps.initial) == null ? void 0 : _animatedProps$initia.value);\n          if (animatedProps != null && animatedProps.jestAnimatedValues) {\n            animatedProps.jestAnimatedValues.current = this.jestAnimatedProps;\n          }\n        }\n        styles.forEach(function (style) {\n          style.viewDescriptors.add({\n            tag: viewTag,\n            name: viewName,\n            shadowNodeWrapper: shadowNodeWrapper\n          });\n          if (IS_JEST) {\n            _this2.jestAnimatedStyle.value = _objectSpread(_objectSpread({}, _this2.jestAnimatedStyle.value), style.initial.value);\n            style.jestAnimatedValues.current = _this2.jestAnimatedStyle;\n          }\n        });\n        if (prevAnimatedProps && prevAnimatedProps !== this.props.animatedProps) {\n          prevAnimatedProps.viewDescriptors.remove(viewTag);\n        }\n        if ((_this$props$animatedP3 = this.props.animatedProps) != null && _this$props$animatedP3.viewDescriptors) {\n          this.props.animatedProps.viewDescriptors.add({\n            tag: viewTag,\n            name: viewName,\n            shadowNodeWrapper: shadowNodeWrapper\n          });\n        }\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps, _prevState, snapshot) {\n        var _this$_NativeEventsMa3;\n        this._configureLayoutAnimation(LayoutAnimationType.LAYOUT, this.props.layout, prevProps.layout);\n        this._configureLayoutAnimation(LayoutAnimationType.EXITING, this.props.exiting, prevProps.exiting);\n        if (this.props.sharedTransitionTag !== undefined || prevProps.sharedTransitionTag !== undefined) {\n          this._configureSharedTransition();\n        }\n        (_this$_NativeEventsMa3 = this._NativeEventsManager) == null ? void 0 : _this$_NativeEventsMa3.updateEvents(prevProps);\n        this._attachAnimatedStyles();\n        this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n        if (IS_WEB && this.props.exiting && this._componentDOMRef) {\n          saveSnapshot(this._componentDOMRef);\n        }\n        if (IS_WEB && snapshot && this.props.layout && !getReducedMotionFromConfig(this.props.layout)) {\n          tryActivateLayoutTransition(this.props, this._componentDOMRef, snapshot);\n        }\n      }\n    }, {\n      key: \"_configureLayoutAnimation\",\n      value: function _configureLayoutAnimation(type, currentConfig, previousConfig) {\n        var _this$props2;\n        if (IS_WEB || currentConfig === previousConfig) {\n          return;\n        }\n        if (this._isReducedMotion(currentConfig)) {\n          if (!previousConfig) {\n            return;\n          }\n          currentConfig = undefined;\n        }\n        updateLayoutAnimations(isFabric() && type === LayoutAnimationType.ENTERING ? this.reanimatedID : this.getComponentViewTag(), type, currentConfig && maybeBuild(currentConfig, type === LayoutAnimationType.LAYOUT ? undefined : (_this$props2 = this.props) == null ? void 0 : _this$props2.style, AnimatedComponent.displayName));\n      }\n    }, {\n      key: \"_configureSharedTransition\",\n      value: function _configureSharedTransition() {\n        var _ref, _this$props$sharedTra;\n        var isUnmounting = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        if (IS_WEB) {\n          return;\n        }\n        var sharedTransitionTag = this.props.sharedTransitionTag;\n        if (!sharedTransitionTag) {\n          var _this$_sharedElementT2;\n          (_this$_sharedElementT2 = this._sharedElementTransition) == null ? void 0 : _this$_sharedElementT2.unregisterTransition(this.getComponentViewTag(), isUnmounting);\n          this._sharedElementTransition = null;\n          return;\n        }\n        var sharedElementTransition = (_ref = (_this$props$sharedTra = this.props.sharedTransitionStyle) != null ? _this$props$sharedTra : this._sharedElementTransition) != null ? _ref : new SharedTransition();\n        sharedElementTransition.registerTransition(this.getComponentViewTag(), sharedTransitionTag, isUnmounting);\n        this._sharedElementTransition = sharedElementTransition;\n      }\n    }, {\n      key: \"_isReducedMotion\",\n      value: function _isReducedMotion(config) {\n        return config && 'getReduceMotion' in config && typeof config.getReduceMotion === 'function' ? getReduceMotionFromConfig(config.getReduceMotion()) : getReduceMotionFromConfig();\n      }\n    }, {\n      key: \"getSnapshotBeforeUpdate\",\n      value: function getSnapshotBeforeUpdate() {\n        var _this$_componentDOMRe;\n        if (IS_WEB && this.props.layout && (_this$_componentDOMRe = this._componentDOMRef) != null && _this$_componentDOMRe.getBoundingClientRect) {\n          return this._componentDOMRef.getBoundingClientRect();\n        }\n        return null;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$context4;\n        var filteredProps = this._PropsFilter.filterNonAnimatedProps(this);\n        if (IS_JEST) {\n          filteredProps.jestAnimatedStyle = this.jestAnimatedStyle;\n          filteredProps.jestAnimatedProps = this.jestAnimatedProps;\n        }\n        if (this._isFirstRender && IS_WEB && filteredProps.entering && !getReducedMotionFromConfig(filteredProps.entering)) {\n          var _filteredProps$style;\n          filteredProps.style = Array.isArray(filteredProps.style) ? filteredProps.style.concat([{\n            visibility: 'hidden'\n          }]) : _objectSpread(_objectSpread({}, (_filteredProps$style = filteredProps.style) != null ? _filteredProps$style : {}), {}, {\n            visibility: 'hidden'\n          });\n        }\n        var platformProps = Platform.select({\n          web: {},\n          default: {\n            collapsable: false\n          }\n        });\n        var skipEntering = (_this$context4 = this.context) == null ? void 0 : _this$context4.current;\n        var nativeID = skipEntering || !isFabric() ? undefined : `${this.reanimatedID}`;\n        var jestProps = IS_JEST ? {\n          jestInlineStyle: this.props.style && filterOutAnimatedStyles(this.props.style),\n          jestAnimatedStyle: this.jestAnimatedStyle,\n          jestAnimatedProps: this.jestAnimatedProps\n        } : {};\n        return _jsx(Component, _objectSpread(_objectSpread(_objectSpread({\n          nativeID: nativeID\n        }, filteredProps), jestProps), {}, {\n          ref: this._setComponentRef\n        }, platformProps));\n      }\n    }]);\n    return AnimatedComponent;\n  }(React.Component);\n  AnimatedComponent.contextType = SkipEnteringContext;\n  AnimatedComponent.displayName = `AnimatedComponent(${Component.displayName || Component.name || 'Component'})`;\n  var animatedComponent = componentWithRef(function (props, ref) {\n    return _jsx(AnimatedComponent, _objectSpread(_objectSpread({}, props), ref === null ? null : {\n      forwardedRef: ref\n    }));\n  });\n  animatedComponent.displayName = Component.displayName || Component.name || 'Component';\n  return animatedComponent;\n}\nfunction filterOutAnimatedStyles(style) {\n  if (!style) {\n    return style;\n  }\n  if (!Array.isArray(style)) {\n    return style != null && style.viewDescriptors ? {} : style;\n  }\n  return style.filter(function (styleElement) {\n    return !(styleElement && 'viewDescriptors' in styleElement);\n  }).map(function (styleElement) {\n    if (Array.isArray(styleElement)) {\n      return filterOutAnimatedStyles(styleElement);\n    }\n    return styleElement;\n  });\n}","map":{"version":3,"names":["_defineProperty","_classCallCheck","_createClass","_inherits","_possibleConstructorReturn","_getPrototypeOf","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","invariant","React","Platform","getReduceMotionFromConfig","maybeBuild","LayoutAnimationType","SkipEnteringContext","adaptViewConfig","enableLayoutAnimations","markNodeAsRemovable","unmarkNodeAsRemovable","ReanimatedError","getShadowNodeWrapperFromRef","SharedTransition","configureWebLayoutAnimations","getReducedMotionFromConfig","saveSnapshot","startWebLayoutAnimation","tryActivateLayoutTransition","addHTMLMutationObserver","findHostInstance","isFabric","isJest","isReact19","isWeb","shouldBeUseWeb","componentWithRef","updateLayoutAnimations","getViewInfo","InlinePropManager","JSPropsUpdater","NativeEventsManager","PropsFilter","setAndForwardRef","flattenArray","jsx","_jsx","IS_WEB","IS_JEST","IS_REACT_19","SHOULD_BE_USE_WEB","onlyAnimatedStyles","styles","style","viewDescriptors","id","createAnimatedComponent","Component","options","isReactComponent","name","AnimatedComponent","_React$Component","_super","props","_this$context2","_this","_styles","_isFirstRender","jestAnimatedStyle","value","jestAnimatedProps","_componentRef","_hasAnimatedRef","_componentDOMRef","_sharedElementTransition","_jsPropsUpdater","_InlinePropManager","_PropsFilter","reanimatedID","_willUnmount","_resolveComponentRef","ref","componentRef","getAnimatableRef","elementRef","current","_setComponentRef","getForwardedRef","forwardedRef","setLocalRef","_viewInfo","undefined","_this$props","layout","entering","exiting","sharedTransitionTag","_this$context","_configureSharedTransition","skipEntering","context","_configureLayoutAnimation","ENTERING","key","componentDidMount","_this$_NativeEventsMa","_this$_viewInfo","_NativeEventsManager","attachEvents","addOnJSPropsChangeListener","_attachAnimatedStyles","attachInlineProps","_getViewInfo","LAYOUT","EXITING","_this$context3","visibility","viewTag","componentWillUnmount","_this$_NativeEventsMa2","_this$_sharedElementT","_this$_viewInfo2","detachEvents","removeOnJSPropsChangeListener","_detachStyles","detachInlineProps","unregisterTransition","getComponentViewTag","reduceMotionInExiting","getReduceMotion","wrapper","shadowNodeWrapper","_this$props$animatedP","remove","animatedProps","_updateFromNative","setNativeProps","_this$_componentRef","viewName","viewConfig","DOMElement","hostInstance","viewInfo","_this$props$animatedP2","_this2","_this$props$animatedP3","prevStyles","prevAnimatedProps","_animatedProps","_this$_getViewInfo","hasReanimated2Props","hasOneSameStyle","_loop","prevStyle","isPresent","some","_animatedProps$initia","initial","jestAnimatedValues","add","tag","componentDidUpdate","prevProps","_prevState","snapshot","_this$_NativeEventsMa3","updateEvents","type","currentConfig","previousConfig","_this$props2","_isReducedMotion","displayName","_ref","_this$props$sharedTra","isUnmounting","_this$_sharedElementT2","sharedElementTransition","sharedTransitionStyle","registerTransition","config","getSnapshotBeforeUpdate","_this$_componentDOMRe","getBoundingClientRect","render","_this$context4","filteredProps","filterNonAnimatedProps","_filteredProps$style","Array","isArray","concat","platformProps","select","web","default","collapsable","nativeID","jestProps","jestInlineStyle","filterOutAnimatedStyles","contextType","animatedComponent","styleElement","map"],"sources":["/home/runner/work/DemoReception/DemoReception/example/node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx"],"sourcesContent":["'use strict';\nimport '../layoutReanimation/animationsManager';\n\nimport invariant from 'invariant';\nimport type {\n  Component,\n  ComponentClass,\n  ComponentType,\n  FunctionComponent,\n  PropsWithoutRef,\n  Ref,\n  RefObject,\n} from 'react';\nimport React from 'react';\nimport type { FlatList, FlatListProps } from 'react-native';\nimport { Platform } from 'react-native';\n\nimport { getReduceMotionFromConfig } from '../animation/util';\nimport { maybeBuild } from '../animationBuilder';\nimport type { ShadowNodeWrapper, StyleProps } from '../commonTypes';\nimport { LayoutAnimationType } from '../commonTypes';\nimport { SkipEnteringContext } from '../component/LayoutAnimationConfig';\nimport { adaptViewConfig } from '../ConfigHelper';\nimport {\n  enableLayoutAnimations,\n  markNodeAsRemovable,\n  unmarkNodeAsRemovable,\n} from '../core';\nimport { ReanimatedError } from '../errors';\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport type { AnimateProps } from '../helperTypes';\nimport type { AnimatedStyleHandle } from '../hook/commonTypes';\nimport { SharedTransition } from '../layoutReanimation';\nimport {\n  configureWebLayoutAnimations,\n  getReducedMotionFromConfig,\n  saveSnapshot,\n  startWebLayoutAnimation,\n  tryActivateLayoutTransition,\n} from '../layoutReanimation/web';\nimport type { CustomConfig } from '../layoutReanimation/web/config';\nimport { addHTMLMutationObserver } from '../layoutReanimation/web/domUtils';\nimport { findHostInstance } from '../platform-specific/findHostInstance';\nimport {\n  isFabric,\n  isJest,\n  isReact19,\n  isWeb,\n  shouldBeUseWeb,\n} from '../PlatformChecker';\nimport { componentWithRef } from '../reactUtils';\nimport type { ReanimatedHTMLElement } from '../ReanimatedModule/js-reanimated';\nimport { updateLayoutAnimations } from '../UpdateLayoutAnimations';\nimport type {\n  AnimatedComponentProps,\n  AnimatedComponentRef,\n  AnimatedProps,\n  IAnimatedComponentInternal,\n  INativeEventsManager,\n  InitialComponentProps,\n  LayoutAnimationOrBuilder,\n  NestedArray,\n  ViewInfo,\n} from './commonTypes';\nimport { getViewInfo } from './getViewInfo';\nimport { InlinePropManager } from './InlinePropManager';\nimport JSPropsUpdater from './JSPropsUpdater';\nimport { NativeEventsManager } from './NativeEventsManager';\nimport { PropsFilter } from './PropsFilter';\nimport setAndForwardRef from './setAndForwardRef';\nimport { flattenArray } from './utils';\n\nconst IS_WEB = isWeb();\nconst IS_JEST = isJest();\nconst IS_REACT_19 = isReact19();\nconst SHOULD_BE_USE_WEB = shouldBeUseWeb();\n\nif (IS_WEB) {\n  configureWebLayoutAnimations();\n}\n\nfunction onlyAnimatedStyles(styles: StyleProps[]): StyleProps[] {\n  return styles.filter((style) => style?.viewDescriptors);\n}\n\ntype Options<P> = {\n  setNativeProps: (ref: AnimatedComponentRef, props: P) => void;\n};\n\n/**\n * Lets you create an Animated version of any React Native component.\n *\n * @param component - The component you want to make animatable.\n * @returns A component that Reanimated is capable of animating.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/core/createAnimatedComponent\n */\n\n// Don't change the order of overloads, since such a change breaks current behavior\nexport function createAnimatedComponent<P extends object>(\n  component: FunctionComponent<P>,\n  options?: Options<P>\n): FunctionComponent<AnimateProps<P>>;\n\nexport function createAnimatedComponent<P extends object>(\n  component: ComponentClass<P>,\n  options?: Options<P>\n): ComponentClass<AnimateProps<P>>;\n\nexport function createAnimatedComponent<P extends object>(\n  // Actually ComponentType<P = {}> = ComponentClass<P> | FunctionComponent<P> but we need this overload too\n  // since some external components (like FastImage) are typed just as ComponentType\n  component: ComponentType<P>,\n  options?: Options<P>\n): FunctionComponent<AnimateProps<P>> | ComponentClass<AnimateProps<P>>;\n\n/**\n * @deprecated Please use `Animated.FlatList` component instead of calling\n *   `Animated.createAnimatedComponent(FlatList)` manually.\n */\n// @ts-ignore This is required to create this overload, since type of createAnimatedComponent is incorrect and doesn't include typeof FlatList\nexport function createAnimatedComponent(\n  component: typeof FlatList<unknown>,\n  options?: Options<any>\n): ComponentClass<AnimateProps<FlatListProps<unknown>>>;\n\nlet id = 0;\n\nexport function createAnimatedComponent(\n  Component: ComponentType<InitialComponentProps>,\n  options?: Options<InitialComponentProps>\n): any {\n  if (!IS_REACT_19) {\n    invariant(\n      typeof Component !== 'function' ||\n        (Component.prototype && Component.prototype.isReactComponent),\n      `Looks like you're passing a function component \\`${Component.name}\\` to \\`createAnimatedComponent\\` function which supports only class components. Please wrap your function component with \\`React.forwardRef()\\` or use a class component instead.`\n    );\n  }\n\n  class AnimatedComponent\n    extends React.Component<AnimatedComponentProps<InitialComponentProps>>\n    implements IAnimatedComponentInternal\n  {\n    _styles: StyleProps[] | null = null;\n    _animatedProps?: Partial<AnimatedComponentProps<AnimatedProps>>;\n    _isFirstRender = true;\n    jestInlineStyle: NestedArray<StyleProps> | undefined;\n    jestAnimatedStyle: { value: StyleProps } = { value: {} };\n    jestAnimatedProps: { value: AnimatedProps } = { value: {} };\n    _componentRef: AnimatedComponentRef | HTMLElement | null = null;\n    _hasAnimatedRef = false;\n    // Used only on web\n    _componentDOMRef: HTMLElement | null = null;\n    _sharedElementTransition: SharedTransition | null = null;\n    _jsPropsUpdater = new JSPropsUpdater();\n    _InlinePropManager = new InlinePropManager();\n    _PropsFilter = new PropsFilter();\n    _NativeEventsManager?: INativeEventsManager;\n    _viewInfo?: ViewInfo;\n    static displayName: string;\n    static contextType = SkipEnteringContext;\n    context!: React.ContextType<typeof SkipEnteringContext>;\n    reanimatedID = id++;\n    _willUnmount: boolean = false;\n\n    constructor(props: AnimatedComponentProps<InitialComponentProps>) {\n      super(props);\n      if (IS_JEST) {\n        this.jestAnimatedStyle = { value: {} };\n        this.jestAnimatedProps = { value: {} };\n      }\n\n      const skipEntering = this.context?.current;\n      if (isFabric() && !skipEntering) {\n        this._configureLayoutAnimation(\n          LayoutAnimationType.ENTERING,\n          this.props.entering\n        );\n      }\n    }\n\n    componentDidMount() {\n      if (!IS_WEB) {\n        // It exists only on native platforms. We initialize it here because the ref to the animated component is available only post-mount\n        this._NativeEventsManager = new NativeEventsManager(this, options);\n      }\n      this._NativeEventsManager?.attachEvents();\n      this._jsPropsUpdater.addOnJSPropsChangeListener(this);\n      this._attachAnimatedStyles();\n      this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n\n      this._configureLayoutAnimation(\n        LayoutAnimationType.LAYOUT,\n        this.props.layout\n      );\n      this._configureLayoutAnimation(\n        LayoutAnimationType.EXITING,\n        this.props.exiting\n      );\n\n      if (IS_WEB) {\n        if (this.props.exiting && this._componentDOMRef) {\n          saveSnapshot(this._componentDOMRef);\n        }\n\n        if (\n          !this.props.entering ||\n          getReducedMotionFromConfig(this.props.entering as CustomConfig)\n        ) {\n          this._isFirstRender = false;\n          return;\n        }\n\n        const skipEntering = this.context?.current;\n\n        if (!skipEntering) {\n          startWebLayoutAnimation(\n            this.props,\n            this._componentDOMRef as ReanimatedHTMLElement,\n            LayoutAnimationType.ENTERING\n          );\n        } else if (this._componentDOMRef) {\n          this._componentDOMRef.style.visibility = 'initial';\n        }\n      }\n\n      const viewTag = this._viewInfo?.viewTag;\n      if (\n        !SHOULD_BE_USE_WEB &&\n        isFabric() &&\n        this._willUnmount &&\n        typeof viewTag === 'number'\n      ) {\n        unmarkNodeAsRemovable(viewTag);\n      }\n\n      this._isFirstRender = false;\n    }\n\n    componentWillUnmount() {\n      this._NativeEventsManager?.detachEvents();\n      this._jsPropsUpdater.removeOnJSPropsChangeListener(this);\n      this._detachStyles();\n      this._InlinePropManager.detachInlineProps();\n      if (this.props.sharedTransitionTag) {\n        this._configureSharedTransition(true);\n      }\n      this._sharedElementTransition?.unregisterTransition(\n        this.getComponentViewTag(),\n        true\n      );\n\n      const exiting = this.props.exiting;\n\n      if (\n        IS_WEB &&\n        this._componentDOMRef &&\n        exiting &&\n        !getReducedMotionFromConfig(exiting as CustomConfig)\n      ) {\n        addHTMLMutationObserver();\n\n        startWebLayoutAnimation(\n          this.props,\n          this._componentDOMRef as ReanimatedHTMLElement,\n          LayoutAnimationType.EXITING\n        );\n      } else if (exiting && !IS_WEB && !isFabric()) {\n        const reduceMotionInExiting =\n          'getReduceMotion' in exiting &&\n          typeof exiting.getReduceMotion === 'function'\n            ? getReduceMotionFromConfig(exiting.getReduceMotion())\n            : getReduceMotionFromConfig();\n        if (!reduceMotionInExiting) {\n          this._configureLayoutAnimation(LayoutAnimationType.EXITING, exiting);\n        }\n      }\n\n      const wrapper = this._viewInfo?.shadowNodeWrapper;\n      if (!SHOULD_BE_USE_WEB && isFabric() && wrapper) {\n        // Mark node as removable on the native (C++) side, but only actually remove it\n        // when it no longer exists in the Shadow Tree. This ensures proper cleanup of\n        // animations/transitions/props while handling cases where the node might be\n        // remounted (e.g., when frozen) after componentWillUnmount is called.\n        markNodeAsRemovable(wrapper);\n      }\n\n      this._willUnmount = true;\n    }\n\n    getComponentViewTag() {\n      return this._getViewInfo().viewTag as number;\n    }\n\n    _detachStyles() {\n      const viewTag = this.getComponentViewTag();\n      if (viewTag !== -1 && this._styles !== null) {\n        for (const style of this._styles) {\n          style.viewDescriptors.remove(viewTag);\n        }\n        if (this.props.animatedProps?.viewDescriptors) {\n          this.props.animatedProps.viewDescriptors.remove(viewTag);\n        }\n      }\n    }\n\n    _updateFromNative(props: StyleProps) {\n      if (options?.setNativeProps) {\n        options.setNativeProps(\n          this._componentRef as AnimatedComponentRef,\n          props\n        );\n      } else {\n        (this._componentRef as AnimatedComponentRef)?.setNativeProps?.(props);\n      }\n    }\n\n    _getViewInfo(): ViewInfo {\n      if (this._viewInfo !== undefined) {\n        return this._viewInfo;\n      }\n\n      let viewTag: number | typeof this._componentRef;\n      let viewName: string | null;\n      let shadowNodeWrapper: ShadowNodeWrapper | null = null;\n      let viewConfig;\n      let DOMElement: HTMLElement | null = null;\n\n      if (SHOULD_BE_USE_WEB) {\n        // At this point I assume that `_setComponentRef` was already called and `_component` is set.\n        // `this._component` on web represents HTMLElement of our component, that's why we use casting\n        viewTag = this._componentRef;\n        DOMElement = this._componentDOMRef;\n        viewName = null;\n        shadowNodeWrapper = null;\n        viewConfig = null;\n      } else {\n        const hostInstance = findHostInstance(this);\n        if (!hostInstance) {\n          /* \n            findHostInstance can return null for a component that doesn't render anything \n            (render function returns null). Example: \n            svg Stop: https://github.com/react-native-svg/react-native-svg/blob/develop/src/elements/Stop.tsx\n          */\n          throw new ReanimatedError(\n            'Cannot find host instance for this component. Maybe it renders nothing?'\n          );\n        }\n\n        const viewInfo = getViewInfo(hostInstance);\n        viewTag = viewInfo.viewTag;\n        viewName = viewInfo.viewName;\n        viewConfig = viewInfo.viewConfig;\n        shadowNodeWrapper = isFabric()\n          ? getShadowNodeWrapperFromRef(this, hostInstance)\n          : null;\n      }\n      this._viewInfo = { viewTag, viewName, shadowNodeWrapper, viewConfig };\n      if (DOMElement) {\n        this._viewInfo.DOMElement = DOMElement;\n      }\n      return this._viewInfo;\n    }\n\n    _attachAnimatedStyles() {\n      const styles = this.props.style\n        ? onlyAnimatedStyles(flattenArray<StyleProps>(this.props.style))\n        : [];\n      const animatedProps = this.props.animatedProps;\n      const prevStyles = this._styles;\n      this._styles = styles;\n\n      const prevAnimatedProps = this._animatedProps;\n      this._animatedProps = animatedProps;\n\n      const { viewTag, viewName, shadowNodeWrapper, viewConfig } =\n        this._getViewInfo();\n\n      // update UI props whitelist for this view\n      const hasReanimated2Props =\n        this.props.animatedProps?.viewDescriptors || styles.length;\n      if (hasReanimated2Props && viewConfig) {\n        adaptViewConfig(viewConfig);\n      }\n\n      // remove old styles\n      if (prevStyles) {\n        // in most of the cases, views have only a single animated style and it remains unchanged\n        const hasOneSameStyle =\n          styles.length === 1 &&\n          prevStyles.length === 1 &&\n          styles[0] === prevStyles[0];\n\n        if (!hasOneSameStyle) {\n          // otherwise, remove each style that is not present in new styles\n          for (const prevStyle of prevStyles) {\n            const isPresent = styles.some((style) => style === prevStyle);\n            if (!isPresent) {\n              prevStyle.viewDescriptors.remove(viewTag);\n            }\n          }\n        }\n      }\n\n      if (animatedProps && IS_JEST) {\n        this.jestAnimatedProps.value = {\n          ...this.jestAnimatedProps.value,\n          ...animatedProps?.initial?.value,\n        };\n\n        if (animatedProps?.jestAnimatedValues) {\n          animatedProps.jestAnimatedValues.current = this.jestAnimatedProps;\n        }\n      }\n\n      styles.forEach((style) => {\n        style.viewDescriptors.add({\n          tag: viewTag,\n          name: viewName,\n          shadowNodeWrapper,\n        });\n        if (IS_JEST) {\n          /**\n           * We need to connect Jest's TestObject instance whose contains just\n           * props object with the updateProps() function where we update the\n           * properties of the component. We can't update props object directly\n           * because TestObject contains a copy of props - look at render\n           * function: const props = this._filterNonAnimatedProps(this.props);\n           */\n          this.jestAnimatedStyle.value = {\n            ...this.jestAnimatedStyle.value,\n            ...style.initial.value,\n          };\n          style.jestAnimatedValues.current = this.jestAnimatedStyle;\n        }\n      });\n\n      // detach old animatedProps\n      if (prevAnimatedProps && prevAnimatedProps !== this.props.animatedProps) {\n        prevAnimatedProps.viewDescriptors!.remove(viewTag as number);\n      }\n\n      // attach animatedProps property\n      if (this.props.animatedProps?.viewDescriptors) {\n        this.props.animatedProps.viewDescriptors.add({\n          tag: viewTag as number,\n          name: viewName!,\n          shadowNodeWrapper: shadowNodeWrapper!,\n        });\n      }\n    }\n\n    componentDidUpdate(\n      prevProps: AnimatedComponentProps<InitialComponentProps>,\n      _prevState: Readonly<unknown>,\n      snapshot: DOMRect | null\n    ) {\n      this._configureLayoutAnimation(\n        LayoutAnimationType.LAYOUT,\n        this.props.layout,\n        prevProps.layout\n      );\n      this._configureLayoutAnimation(\n        LayoutAnimationType.EXITING,\n        this.props.exiting,\n        prevProps.exiting\n      );\n\n      if (\n        this.props.sharedTransitionTag !== undefined ||\n        prevProps.sharedTransitionTag !== undefined\n      ) {\n        this._configureSharedTransition();\n      }\n      this._NativeEventsManager?.updateEvents(prevProps);\n      this._attachAnimatedStyles();\n      this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n\n      if (IS_WEB && this.props.exiting && this._componentDOMRef) {\n        saveSnapshot(this._componentDOMRef);\n      }\n\n      if (\n        IS_WEB &&\n        snapshot &&\n        this.props.layout &&\n        !getReducedMotionFromConfig(this.props.layout as CustomConfig)\n      ) {\n        tryActivateLayoutTransition(\n          this.props,\n          this._componentDOMRef as ReanimatedHTMLElement,\n          snapshot\n        );\n      }\n    }\n\n    _configureLayoutAnimation(\n      type: LayoutAnimationType,\n      currentConfig: LayoutAnimationOrBuilder | undefined,\n      previousConfig?: LayoutAnimationOrBuilder\n    ) {\n      if (IS_WEB || currentConfig === previousConfig) {\n        return;\n      }\n\n      if (this._isReducedMotion(currentConfig)) {\n        if (!previousConfig) {\n          return;\n        }\n        currentConfig = undefined;\n      }\n\n      updateLayoutAnimations(\n        isFabric() && type === LayoutAnimationType.ENTERING\n          ? this.reanimatedID\n          : this.getComponentViewTag(),\n        type,\n        currentConfig &&\n          maybeBuild(\n            currentConfig,\n            type === LayoutAnimationType.LAYOUT\n              ? undefined /* We don't have to warn user if style has common properties with animation for LAYOUT */\n              : this.props?.style,\n            AnimatedComponent.displayName\n          )\n      );\n    }\n\n    _configureSharedTransition(isUnmounting = false) {\n      if (IS_WEB) {\n        return;\n      }\n\n      const { sharedTransitionTag } = this.props;\n      if (!sharedTransitionTag) {\n        this._sharedElementTransition?.unregisterTransition(\n          this.getComponentViewTag(),\n          isUnmounting\n        );\n        this._sharedElementTransition = null;\n        return;\n      }\n      const sharedElementTransition =\n        this.props.sharedTransitionStyle ??\n        this._sharedElementTransition ??\n        new SharedTransition();\n      sharedElementTransition.registerTransition(\n        this.getComponentViewTag(),\n        sharedTransitionTag,\n        isUnmounting\n      );\n      this._sharedElementTransition = sharedElementTransition;\n    }\n\n    _resolveComponentRef = (ref: Component | HTMLElement | null) => {\n      const componentRef = ref as AnimatedComponentRef;\n      // Component can specify ref which should be animated when animated version of the component is created.\n      // Otherwise, we animate the component itself.\n      if (componentRef && componentRef.getAnimatableRef) {\n        this._hasAnimatedRef = true;\n        return componentRef.getAnimatableRef();\n      }\n      // Case for SVG components on Web\n      if (SHOULD_BE_USE_WEB) {\n        if (componentRef && componentRef.elementRef) {\n          this._componentDOMRef = componentRef.elementRef.current;\n        } else {\n          this._componentDOMRef = ref as HTMLElement;\n        }\n      }\n      return componentRef;\n    };\n\n    _setComponentRef = setAndForwardRef<Component | HTMLElement>({\n      getForwardedRef: () =>\n        this.props.forwardedRef as RefObject<\n          Component<Record<string, unknown>, Record<string, unknown>, unknown>\n        >,\n      setLocalRef: (ref) => {\n        if (!ref) {\n          // component has been unmounted\n          return;\n        }\n        if (ref !== this._componentRef) {\n          this._componentRef = this._resolveComponentRef(ref);\n          // if ref is changed, reset viewInfo\n          this._viewInfo = undefined;\n        }\n\n        const { layout, entering, exiting, sharedTransitionTag } = this.props;\n        if (layout || entering || exiting || sharedTransitionTag) {\n          if (!SHOULD_BE_USE_WEB) {\n            enableLayoutAnimations(true, false);\n          }\n\n          if (sharedTransitionTag) {\n            this._configureSharedTransition();\n          }\n\n          const skipEntering = this.context?.current;\n          if (entering && !isFabric() && !skipEntering && !IS_WEB) {\n            this._configureLayoutAnimation(\n              LayoutAnimationType.ENTERING,\n              this.props.entering\n            );\n          }\n        }\n      },\n    });\n\n    _isReducedMotion(config?: LayoutAnimationOrBuilder): boolean {\n      return config &&\n        'getReduceMotion' in config &&\n        typeof config.getReduceMotion === 'function'\n        ? getReduceMotionFromConfig(config.getReduceMotion())\n        : getReduceMotionFromConfig();\n    }\n\n    // This is a component lifecycle method from React, therefore we are not calling it directly.\n    // It is called before the component gets rerendered. This way we can access components' position before it changed\n    // and later on, in componentDidUpdate, calculate translation for layout transition.\n    getSnapshotBeforeUpdate() {\n      if (\n        IS_WEB &&\n        this.props.layout &&\n        this._componentDOMRef?.getBoundingClientRect\n      ) {\n        return this._componentDOMRef.getBoundingClientRect();\n      }\n\n      // `getSnapshotBeforeUpdate` has to return value which is not `undefined`.\n      return null;\n    }\n\n    render() {\n      const filteredProps = this._PropsFilter.filterNonAnimatedProps(this);\n\n      if (IS_JEST) {\n        filteredProps.jestAnimatedStyle = this.jestAnimatedStyle;\n        filteredProps.jestAnimatedProps = this.jestAnimatedProps;\n      }\n\n      // Layout animations on web are set inside `componentDidMount` method, which is called after first render.\n      // Because of that we can encounter a situation in which component is visible for a short amount of time, and later on animation triggers.\n      // I've tested that on various browsers and devices and it did not happen to me. To be sure that it won't happen to someone else,\n      // I've decided to hide component at first render. Its visibility is reset in `componentDidMount`.\n      if (\n        this._isFirstRender &&\n        IS_WEB &&\n        filteredProps.entering &&\n        !getReducedMotionFromConfig(filteredProps.entering as CustomConfig)\n      ) {\n        filteredProps.style = Array.isArray(filteredProps.style)\n          ? filteredProps.style.concat([{ visibility: 'hidden' }])\n          : {\n              ...(filteredProps.style ?? {}),\n              visibility: 'hidden', // Hide component until `componentDidMount` triggers\n            };\n      }\n\n      const platformProps = Platform.select({\n        web: {},\n        default: { collapsable: false },\n      });\n\n      const skipEntering = this.context?.current;\n      const nativeID =\n        skipEntering || !isFabric() ? undefined : `${this.reanimatedID}`;\n\n      const jestProps = IS_JEST\n        ? {\n            jestInlineStyle:\n              this.props.style && filterOutAnimatedStyles(this.props.style),\n            jestAnimatedStyle: this.jestAnimatedStyle,\n            jestAnimatedProps: this.jestAnimatedProps,\n          }\n        : {};\n\n      return (\n        <Component\n          nativeID={nativeID}\n          {...filteredProps}\n          {...jestProps}\n          // Casting is used here, because ref can be null - in that case it cannot be assigned to HTMLElement.\n          // After spending some time trying to figure out what to do with this problem, we decided to leave it this way\n          ref={this._setComponentRef as (ref: Component) => void}\n          {...platformProps}\n        />\n      );\n    }\n  }\n\n  AnimatedComponent.displayName = `AnimatedComponent(${\n    Component.displayName || Component.name || 'Component'\n  })`;\n\n  const animatedComponent = componentWithRef(\n    (\n      props: PropsWithoutRef<AnimatedComponentProps<InitialComponentProps>>,\n      ref: Ref<Component>\n    ) => (\n      <AnimatedComponent\n        {...props}\n        {...(ref === null ? null : { forwardedRef: ref })}\n      />\n    )\n  );\n\n  animatedComponent.displayName =\n    Component.displayName || Component.name || 'Component';\n\n  return animatedComponent;\n}\n\nfunction filterOutAnimatedStyles(\n  style: NestedArray<StyleProps | AnimatedStyleHandle | null | undefined>\n): NestedArray<StyleProps | null | undefined> {\n  if (!style) {\n    return style;\n  }\n  if (!Array.isArray(style)) {\n    return style?.viewDescriptors ? {} : style;\n  }\n  return style\n    .filter(\n      (styleElement) => !(styleElement && 'viewDescriptors' in styleElement)\n    )\n    .map((styleElement) => {\n      if (Array.isArray(styleElement)) {\n        return filterOutAnimatedStyles(styleElement);\n      }\n      return styleElement;\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}