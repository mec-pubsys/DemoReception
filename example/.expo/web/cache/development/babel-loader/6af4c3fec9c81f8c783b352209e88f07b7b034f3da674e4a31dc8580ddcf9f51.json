{"ast":null,"code":"'use strict';\n\nimport { LayoutAnimationType } from \"../../../commonTypes.js\";\nimport { getEasingByName } from \"../Easing.web.js\";\nfunction resetStyle(component) {\n  component.style.animationName = '';\n  component.style.position = 'absolute';\n  component.style.top = '0px';\n  component.style.left = '0px';\n  component.style.margin = '0px';\n  component.style.width = '100%';\n  component.style.height = '100%';\n}\nfunction showChildren(parent, childrenDisplayProperty, shouldShow) {\n  for (var i = 0; i < parent.children.length; ++i) {\n    var child = parent.children[i];\n    if (shouldShow) {\n      child.style.display = childrenDisplayProperty.get(child);\n    } else {\n      childrenDisplayProperty.set(child, child.style.display);\n      child.style.display = 'none';\n    }\n  }\n}\nfunction prepareParent(element, dummy, animationConfig, transitionData) {\n  animationConfig.easing = getEasingByName(transitionData.easingX);\n  var childrenDisplayProperty = new Map();\n  showChildren(element, childrenDisplayProperty, false);\n  var originalBackgroundColor = element.style.backgroundColor;\n  element.style.backgroundColor = 'transparent';\n  var onFinalize = function onFinalize() {\n    if (element.contains(dummy)) {\n      element.removeChild(dummy);\n    }\n    showChildren(element, childrenDisplayProperty, true);\n    element.style.backgroundColor = originalBackgroundColor;\n  };\n  var animationCancelCallback = function animationCancelCallback() {\n    onFinalize();\n    element.removeEventListener('animationcancel', animationCancelCallback);\n  };\n  var animationEndCallback = function animationEndCallback() {\n    onFinalize();\n    element.removeEventListener('animationend', animationEndCallback);\n  };\n  element.addEventListener('animationend', animationEndCallback);\n  element.addEventListener('animationcancel', animationCancelCallback);\n  element.appendChild(dummy);\n}\nfunction prepareDummy(element, animationConfig, transitionData, dummyTransitionKeyframeName) {\n  var dummyAnimationConfig = {\n    animationName: dummyTransitionKeyframeName,\n    animationType: LayoutAnimationType.LAYOUT,\n    duration: animationConfig.duration,\n    delay: animationConfig.delay,\n    easing: getEasingByName(transitionData.easingY),\n    callback: null,\n    reversed: false\n  };\n  var dummy = element.cloneNode(true);\n  dummy.reanimatedDummy = true;\n  resetStyle(dummy);\n  return {\n    dummy: dummy,\n    dummyAnimationConfig: dummyAnimationConfig\n  };\n}\nexport function prepareCurvedTransition(element, animationConfig, transitionData, dummyTransitionKeyframeName) {\n  var _prepareDummy = prepareDummy(element, animationConfig, transitionData, dummyTransitionKeyframeName),\n    dummy = _prepareDummy.dummy,\n    dummyAnimationConfig = _prepareDummy.dummyAnimationConfig;\n  prepareParent(element, dummy, animationConfig, transitionData);\n  return {\n    dummy: dummy,\n    dummyAnimationConfig: dummyAnimationConfig\n  };\n}\nexport function CurvedTransition(keyframeXName, keyframeYName, transitionData) {\n  var keyframeXObj = {\n    name: keyframeXName,\n    style: {\n      0: {\n        transform: [{\n          translateX: `${transitionData.translateX}px`,\n          scale: `${transitionData.scaleX},${transitionData.scaleY}`\n        }]\n      }\n    },\n    duration: 300\n  };\n  var keyframeYObj = {\n    name: keyframeYName,\n    style: {\n      0: {\n        transform: [{\n          translateY: `${transitionData.translateY}px`,\n          scale: `${transitionData.scaleX},${transitionData.scaleY}`\n        }]\n      }\n    },\n    duration: 300\n  };\n  return {\n    firstKeyframeObj: keyframeXObj,\n    secondKeyframeObj: keyframeYObj\n  };\n}","map":{"version":3,"names":["LayoutAnimationType","getEasingByName","resetStyle","component","style","animationName","position","top","left","margin","width","height","showChildren","parent","childrenDisplayProperty","shouldShow","i","children","length","child","display","get","set","prepareParent","element","dummy","animationConfig","transitionData","easing","easingX","Map","originalBackgroundColor","backgroundColor","onFinalize","contains","removeChild","animationCancelCallback","removeEventListener","animationEndCallback","addEventListener","appendChild","prepareDummy","dummyTransitionKeyframeName","dummyAnimationConfig","animationType","LAYOUT","duration","delay","easingY","callback","reversed","cloneNode","reanimatedDummy","prepareCurvedTransition","_prepareDummy","CurvedTransition","keyframeXName","keyframeYName","keyframeXObj","name","transform","translateX","scale","scaleX","scaleY","keyframeYObj","translateY","firstKeyframeObj","secondKeyframeObj"],"sources":["/home/runner/work/DemoReception/DemoReception/example/node_modules/react-native-reanimated/src/layoutReanimation/web/transition/Curved.web.ts"],"sourcesContent":["'use strict';\nimport { LayoutAnimationType } from '../../../commonTypes';\nimport type { ReanimatedHTMLElement } from '../../../ReanimatedModule/js-reanimated';\nimport type { TransitionData } from '../animationParser';\nimport type { AnimationConfig } from '../config';\nimport type { WebEasingsNames } from '../Easing.web';\nimport { getEasingByName } from '../Easing.web';\n\nfunction resetStyle(component: HTMLElement) {\n  component.style.animationName = ''; // This line prevents unwanted entering animation\n  component.style.position = 'absolute';\n  component.style.top = '0px';\n  component.style.left = '0px';\n  component.style.margin = '0px';\n  component.style.width = '100%';\n  component.style.height = '100%';\n}\n\nfunction showChildren(\n  parent: HTMLElement,\n  childrenDisplayProperty: Map<HTMLElement, string>,\n  shouldShow: boolean\n) {\n  for (let i = 0; i < parent.children.length; ++i) {\n    const child = parent.children[i] as HTMLElement;\n\n    if (shouldShow) {\n      child.style.display = childrenDisplayProperty.get(child)!;\n    } else {\n      childrenDisplayProperty.set(child, child.style.display);\n      child.style.display = 'none';\n    }\n  }\n}\n\nfunction prepareParent(\n  element: ReanimatedHTMLElement,\n  dummy: ReanimatedHTMLElement,\n  animationConfig: AnimationConfig,\n  transitionData: TransitionData\n) {\n  // Adjust configs for `CurvedTransition` and create config object for dummy\n  animationConfig.easing = getEasingByName(\n    transitionData.easingX as WebEasingsNames\n  );\n\n  const childrenDisplayProperty = new Map<HTMLElement, string>();\n  showChildren(element, childrenDisplayProperty, false);\n\n  const originalBackgroundColor = element.style.backgroundColor;\n  element.style.backgroundColor = 'transparent';\n\n  const onFinalize = () => {\n    if (element.contains(dummy)) {\n      element.removeChild(dummy);\n    }\n\n    showChildren(element, childrenDisplayProperty, true);\n\n    element.style.backgroundColor = originalBackgroundColor;\n  };\n\n  const animationCancelCallback = () => {\n    onFinalize();\n    element.removeEventListener('animationcancel', animationCancelCallback);\n  };\n\n  const animationEndCallback = () => {\n    onFinalize();\n    element.removeEventListener('animationend', animationEndCallback);\n  };\n\n  element.addEventListener('animationend', animationEndCallback);\n  element.addEventListener('animationcancel', animationCancelCallback);\n\n  element.appendChild(dummy);\n}\n\nfunction prepareDummy(\n  element: ReanimatedHTMLElement,\n  animationConfig: AnimationConfig,\n  transitionData: TransitionData,\n  dummyTransitionKeyframeName: string\n) {\n  const dummyAnimationConfig: AnimationConfig = {\n    animationName: dummyTransitionKeyframeName,\n    animationType: LayoutAnimationType.LAYOUT,\n    duration: animationConfig.duration,\n    delay: animationConfig.delay,\n    easing: getEasingByName(transitionData.easingY as WebEasingsNames),\n    callback: null,\n    reversed: false,\n  };\n\n  const dummy = element.cloneNode(true) as ReanimatedHTMLElement;\n  dummy.reanimatedDummy = true;\n  resetStyle(dummy);\n\n  return { dummy, dummyAnimationConfig };\n}\n\nexport function prepareCurvedTransition(\n  element: ReanimatedHTMLElement,\n  animationConfig: AnimationConfig,\n  transitionData: TransitionData,\n  dummyTransitionKeyframeName: string\n) {\n  const { dummy, dummyAnimationConfig } = prepareDummy(\n    element,\n    animationConfig,\n    transitionData,\n    dummyTransitionKeyframeName\n  );\n\n  prepareParent(element, dummy, animationConfig, transitionData);\n\n  return { dummy, dummyAnimationConfig };\n}\n\nexport function CurvedTransition(\n  keyframeXName: string,\n  keyframeYName: string,\n  transitionData: TransitionData\n) {\n  const keyframeXObj = {\n    name: keyframeXName,\n    style: {\n      0: {\n        transform: [\n          {\n            translateX: `${transitionData.translateX}px`,\n            scale: `${transitionData.scaleX},${transitionData.scaleY}`,\n          },\n        ],\n      },\n    },\n    duration: 300,\n  };\n\n  const keyframeYObj = {\n    name: keyframeYName,\n    style: {\n      0: {\n        transform: [\n          {\n            translateY: `${transitionData.translateY}px`,\n            scale: `${transitionData.scaleX},${transitionData.scaleY}`,\n          },\n        ],\n      },\n    },\n    duration: 300,\n  };\n\n  return {\n    firstKeyframeObj: keyframeXObj,\n    secondKeyframeObj: keyframeYObj,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}